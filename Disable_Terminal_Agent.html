
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>QTpod — Siteminder Troubleshooting (Inline Images)</title>
  <style>
    :root { --bg:#0f172a; --panel:#111827; --accent:#22c55e; --text:#e5e7eb; --muted:#9ca3af; }
    html,body { height:100%; }
    body { margin:0; background:var(--bg); color:var(--text); font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif; }
    header { padding:20px 25px; border-bottom:1px solid #1f2937; background:#0b1220; display:flex; align-items:center; gap:16px; }
    header a { color:#93c5fd; text-decoration:none; }
    h1 { margin:0; font-size:50px; }
    .container { 
      display:grid; 
      grid-template-columns: 380px 1fr 380px; 
      gap:16px; 
      padding:16px; 
    }
    .card { background:var(--panel); border:1px solid #1f2937; border-radius:12px; }
    .card h2 { margin:0; padding:12px 16px; border-bottom:1px solid #1f2937; font-size:16px; }
    .card .content { padding:12px 16px; }
    label { display:block; margin:15px 0 10px; color:var(--muted); font-size:12px; }
    input, textarea { width:50%; padding:5px; border-radius:8px; border:1px solid #374151; background:#0b1220; color:var(--text); }    
    textarea { min-height:25px; }
    .steps { list-style:none; margin:0; padding:0; }
    .step { border-bottom:1px solid #1f2937; padding:12px 0; }
    .step:last-child { border-bottom:none; }
    .row { display:flex; align-items:flex-start; gap:10px; }
    .row input[type=checkbox]{ width:18px; height:18px; margin-top:2px; }
    .step-title { font-size:14px; line-height:1.4; }
    .note { margin-top:5px; }
    .img-wrap { margin-top:8px; border:1px dashed #334155; border-radius:8px; padding:8px; display:none; }
    .img-wrap img { max-width:100%; height:auto; border-radius:6px; }
    .img-toggle { font-size:12px; color:#93c5fd; cursor:pointer; user-select:none; }
    .actions { display:flex; gap:8px; flex-wrap:wrap; }
    button { padding:10px 12px; border-radius:8px; border:1px solid #1f2937; background:#0b1220; color:var(--text); cursor:pointer; }
    button.primary { background:var(--accent); color:#0b1220; border-color:#16a34a; font-weight:600; }
    button.outline { border-color:#374151; }
    .log { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px; background:#0b1220; border:1px solid #374151; border-radius:8px; padding:8px; }
    .footer { padding:12px 16px; color:var(--muted); font-size:12px; border-top:1px solid #1f2937; }
  </style>
</head>
<body>
  <header>
    <h1 style="width:100%; text-align:center; color:#22c55e; ont-size: 48px;">
      Disable Terminal Agent
  </header>
  <div class="container">

    <div class="card">
      <h2>Required Inputs</h2>
      <div class="content">
        <label>ServiceNow Ticket #</label>
        <input id="ticket" placeholder="e.g., WO12345" />
        <label>Customer first and last name</label>
        <input id="customer_full" placeholder="e.g., Jane Q. Doe" />
        <label>Contact phone number</label>
        <input id="phone" placeholder="e.g., 555-123-4567" />
        <div class="actions" style="margin-top:10px;">
          <button class="outline" id="reset_form">Reset inputs</button>
        </div>
      </div>
      <div class="footer">Only these three fields are required; notes per step are optional.</div>
    </div>

    <div class="card">
      <h2>Troubleshooting Steps</h2>
      <div class="content">
        <ul class="steps" id="steps_list"></ul>
        <div class="actions" style="margin-top:10px;">
          <button id="mark_all">Mark all completed</button>
          <button class="outline" id="clear_all">Clear all</button>
        </div>
      </div>
      <div class="footer">Use the image toggle on steps to view screenshots extracted from the Word document.</div>
    </div>
      
    <div class="card">
      <h2>Helpful Tips</h2>
      <div class="content">
        <label>General Notes</label>
        <p> - Tail number in customer account details is not functionally tied to the card. </p>
        <p> - It does not auto-populate when a tail number is required. </p>
        <p> * It does not appear in the transactions tab. </p>
        <p> * Only the tail number manually entered at the pedestal shows in transactions. </p>

        <label>Known Issues</label>
        <p> 1. Known Issues Placeholder </p>
        <p> *** KI PH </p>
      </div>
      <div class="footer">
        Optional reference notes to speed up troubleshooting.
    </div>
  </div>

    <div class="card" style="grid-column: 1 / -1;">
      <h2>ServiceNow Work Note (Auto‑generated)</h2>
      <div class="content">
        <textarea id="summary" class="log" readonly></textarea>
        <div class="actions" style="margin-top:10px;">
          <button class="primary" id="copy_summary">Copy to clipboard</button>
          <!--
          <button class="outline" id="download_log">Download session log (JSON)</button>    
        -->
        </div>
      </div>
      <div class="footer">Paste the copied note into the SNOW work notes field.</div>
    </div>

  </div>
   <footer style="text-align:center; padding:20px;">
      <a href="index.html"
         style="background:#28a745;color:#000;padding:12px 24px;
                border-radius:6px;text-decoration:none;font-weight:bold;">
        Back to Main Page
      </a>
   </footer>

  <script>
    /* Inline image mapping injected here */
    var STEP_IMAGES = {
  1: 'Disable_Termial_Agent.html/images/Godspeed_Aviation.jpg',
  2: 'Disable_Termial_Agent.html/images/Disable_Terminal_Agent.png',
 };


    /* Steps injected here */
    var STEPS = [
  'Remote into the terminal in SOTI.',
  'Click on Windows button with the mouse, and type in ‘Run’.',
  'type gpedit.msc -> press Enter.',
  'Got to: User Configuration -> Administrative Templates -> System.',
  "Double-click: 'Don't run specified Windows applications'.",
  "Click Enabled -> then clicked Show...",
  'Add flile name: "qtTermAgent.exe"',
  "Click OK -> Apply.",
    ];

    const stepsList = document.getElementById('steps_list');
    const summaryEl = document.getElementById('summary');

    const inputs = {
      ticket: document.getElementById('ticket'),
      customer_full: document.getElementById('customer_full'),
      phone: document.getElementById('phone')
    };

    const state = { steps: STEPS.map((t, i) => ({ id: i+1, text: t, done:false, note:'' })), startedAt: new Date(), events: [] };

    function log(type, message){ state.events.push({ts: new Date().toISOString(), type, message}); renderSummary(); }

    function renderSteps(){
      stepsList.innerHTML = '';
      for(const s of state.steps){
        const li = document.createElement('li'); li.className = 'step';
        const row = document.createElement('div'); row.className = 'row';
        const cb = document.createElement('input'); cb.type = 'checkbox'; cb.checked = s.done;
        cb.addEventListener('change', e => { s.done = e.target.checked; log('step', `${s.done ? 'Completed' : 'Unmarked'}: Step ${s.id} — ${s.text}`); });
        const title = document.createElement('div'); title.className = 'step-title';

        const toggle = document.createElement('span'); toggle.className = 'img-toggle'; toggle.textContent = STEP_IMAGES[s.id] ? 'Show image' : '';
        toggle.addEventListener('click', () => {
          const box = li.querySelector('.img-wrap');
          if(!box) return;
          const open = box.style.display === 'block';
          box.style.display = open ? 'none' : 'block';
          toggle.textContent = open ? 'Show image' : 'Hide image';
        });

        title.textContent = `${s.id}. ${s.text}`;
        row.appendChild(cb); row.appendChild(title);
        if(STEP_IMAGES[s.id]) row.appendChild(toggle);
        li.appendChild(row);

        const note = document.createElement('textarea'); note.className = 'note'; note.placeholder = 'Optional note for this step'; note.value = s.note;
        note.addEventListener('input', e => { s.note = e.target.value; renderSummary(); }); li.appendChild(note);

        if(STEP_IMAGES[s.id]){
          const imgWrap = document.createElement('div'); imgWrap.className = 'img-wrap';
          const img = document.createElement('img'); img.src = STEP_IMAGES[s.id]; img.alt = `Step ${s.id} image`;
          imgWrap.appendChild(img); li.appendChild(imgWrap);
        }

        stepsList.appendChild(li);
      }
    }

    function renderSummary(){
      const ticket = inputs.ticket.value.trim();
      const cust = inputs.customer_full.value.trim();
      const phone = inputs.phone.value.trim();

      const ts = new Date().toLocaleString();
      let header = `Work Note — Siteminder (Tail Number)\nDate: ${ts}`;
      if(ticket) header += `\nTicket: ${ticket}`;
      if(cust) header += `\nCustomer: ${cust}`;
      if(phone) header += `\nContact: ${phone}`;

      const completed = state.steps.filter(s => s.done);
      const items = completed.map(s => `• Step ${s.id}: ${s.text}${s.note?` — ${s.note}`:''}`);
      const events = state.events.map(e => `• [${e.ts}] ${e.type}: ${e.message}`);

      summaryEl.value = `${header}\n\nActions performed:\n${items.join('\n') || '• (No steps marked complete yet)'}\n\nSession log:\n${events.join('\n') || '• (No events yet)'}`;
    }

    function copySummary(){
      summaryEl.select(); document.execCommand('copy');
      if(navigator.clipboard){ navigator.clipboard.writeText(summaryEl.value).then(() => alert('Summary copied to clipboard. Paste into ServiceNow.'), () => alert('Copied using legacy method.')); }
      else { alert('Summary copied to clipboard. Paste into ServiceNow.'); }
    }

    function downloadLog(){
      const payload = { title: 'Siteminder — Change/Check Tail Number', startedAt: state.startedAt.toISOString(), finishedAt: new Date().toISOString(), technicianInputs: { ticket: inputs.ticket.value, customer_full: inputs.customer_full.value, phone: inputs.phone.value }, steps: state.steps, events: state.events, summary: summaryEl.value };
      const blob = new Blob([JSON.stringify(payload, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; const name = (inputs.ticket.value || 'session').replace(/\s+/g,'-').toLowerCase();
      a.download = `siteminder_tail-number_${name}_${Date.now()}.json`;
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    renderSteps(); renderSummary();
    document.getElementById('copy_summary').addEventListener('click', copySummary);
    document.getElementById('download_log').addEventListener('click', downloadLog);
    document.getElementById('mark_all').addEventListener('click', () => { state.steps.forEach(s => s.done = true); log('bulk', 'Marked all steps as completed'); renderSteps(); });
    document.getElementById('clear_all').addEventListener('click', () => { state.steps.forEach(s => {s.done = false; s.note='';}); log('bulk', 'Cleared all steps and notes'); renderSteps(); });
    document.getElementById('reset_form').addEventListener('click', () => { for(const k in inputs){ inputs[k].value=''; } log('form', 'Reset inputs'); renderSummary(); });

    for(const k in inputs){ inputs[k].addEventListener('input', renderSummary); }
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SiteMinder Account Setup & Two Factor Authentication</title>

<style>
:root {
  --bg:#0f172a; --panel:#111827; --accent:#22c55e;
  --text:#e5e7eb; --muted:#9ca3af;
}
body {
  margin:0; background:var(--bg); color:var(--text);
  font-family: system-ui,-apple-system,Segoe UI,Roboto;
}
header {
  padding:20px; text-align:center;
  border-bottom:1px solid #1f2937;
}
h1 { color:#22c55e; margin:0; font-size:40px; }

.container {
  display:grid;
  grid-template-columns: 380px 1fr;
  gap:16px;
  padding:16px;
}

.card {
  background:var(--panel);
  border:1px solid #1f2937;
  border-radius:12px;
}
.card h2 {
  margin:0; padding:12px 16px;
  border-bottom:1px solid #1f2937;
}
.content { padding:16px; }

.steps { list-style:none; padding:0; margin:0; }
.step { border-bottom:1px solid #1f2937; padding:12px 0; }

.row {
  display:flex; gap:10px; align-items:flex-start;
  cursor:pointer;
}
.row input { margin-top:4px; }

.step-title { font-size:14px; }

.accordion {
  margin-left:28px;
  margin-top:8px;
  display:none;
}

.accordion ul {
  margin:0 0 8px 16px;
}

.note {
  width:100%; margin-top:6px;
  background:#0b1220; color:#e5e7eb;
  border:1px solid #374151;
  border-radius:6px;
  padding:6px;
}

.img-wrap {
  margin-top:8px;
  border:1px dashed #334155;
  border-radius:8px;
  padding:8px;
}
.img-wrap img { max-width:100%; border-radius:6px; }

button {
  padding:8px 12px;
  border-radius:6px;
  border:1px solid #374151;
  background:#0b1220;
  color:#e5e7eb;
  cursor:pointer;
}
button.primary {
  background:#22c55e;
  color:#000;
  font-weight:bold;
}

textarea.log {
  width:100%;
  min-height:180px;
  background:#0b1220;
  color:#e5e7eb;
  border:1px solid #374151;
  border-radius:8px;
  padding:8px;
  font-family:monospace;
}
</style>
</head>

<body>
<header>
  <h1>SiteMinder Account Setup & 2FA</h1>
</header>

<div class="container">

<!-- LEFT -->
<div class="card">
  <h2>Required Inputs</h2>
  <div class="content">
    <label>ServiceNow Ticket</label>
    <input id="ticket"><br><br>
    <label>Customer Name</label>
    <input id="customer"><br><br>
    <label>Phone</label>
    <input id="phone">
  </div>
</div>

<!-- CENTER -->
<div class="card">
  <h2>Troubleshooting Steps</h2>
  <div class="content">
    <ul id="steps_list" class="steps"></ul>
    <button id="mark_all">Mark All</button>
    <button id="clear_all">Clear All</button>
  </div>
</div>

<div class="card" style="grid-column:1 / -1">
  <h2>ServiceNow Work Note</h2>
  <div class="content">
    <textarea id="summary" class="log" readonly></textarea><br>
    <button class="primary" id="copy_summary">Copy</button>
  </div>
</div>

</div>

<script>
/* ================= CONFIG ================= */

const STEP_IMAGES = {
  1: "data:image/png;base64,PUT_YOUR_BASE64_IMAGE_HERE"
};

const STEPS = [
  {
    title: "Email Customer Instructions",
    substeps: [
      "Send portal URL",
      "Provide username and temp password",
      "Explain password rules",
      "Share training videos"
    ]
  },
  {
    title: "Customer Instructions",
    substeps: [
      "Customer logs in",
      "Customer resets password"
    ]
  },
  {
    title: "Confirm Email",
    substeps: [
      "Go to Security",
      "Send confirmation email",
      "Customer confirms"
    ]
  },
  {
    title: "Enable 2FA",
    substeps: [
      "Enable 2FA",
      "Enter verification code"
    ]
  },
  {
    title: "Create Additional Users",
    substeps: [
      "Navigate to User Management",
      "Create user",
      "Confirm email and 2FA"
    ]
  }
];

/* ================= STATE ================= */

const STORAGE_KEY = "siteminder_state";

let state = {
  steps: STEPS.map((s,i)=>({
    id:i+1,
    text:s.title,
    substeps:s.substeps,
    done:false,
    open:false,
    note:""
  }))
};

const stepsList = document.getElementById("steps_list");
const summary = document.getElementById("summary");

/* ================= STORAGE ================= */

function saveState(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}
function loadState(){
  const saved = localStorage.getItem(STORAGE_KEY);
  if(saved) state = JSON.parse(saved);
}

/* ================= RENDER ================= */

function renderSteps(){
  stepsList.innerHTML = "";
  state.steps.forEach(step=>{
    const li = document.createElement("li");
    li.className = "step";

    const row = document.createElement("div");
    row.className = "row";

    const cb = document.createElement("input");
    cb.type = "checkbox";
    cb.checked = step.done;

    const title = document.createElement("div");
    title.className = "step-title";
    title.textContent = `${step.id}. ${step.text}`;

    row.appendChild(cb);
    row.appendChild(title);
    li.appendChild(row);

    const body = document.createElement("div");
    body.className = "accordion";
    body.style.display = step.open ? "block" : "none";

    const ul = document.createElement("ul");
    step.substeps.forEach(s=>{
      const li = document.createElement("li");
      li.textContent = s;
      ul.appendChild(li);
    });
    body.appendChild(ul);

    const note = document.createElement("textarea");
    note.className = "note";
    note.placeholder = "Optional note";
    note.value = step.note;
    body.appendChild(note);

    if(STEP_IMAGES[step.id]){
      const img = document.createElement("img");
      img.src = STEP_IMAGES[step.id];
      const wrap = document.createElement("div");
      wrap.className="img-wrap";
      wrap.appendChild(img);
      body.appendChild(wrap);
    }

    li.appendChild(body);

    cb.onchange = e=>{
      step.done = e.target.checked;
      saveState();
      renderSummary();
    };

    note.oninput = e=>{
      step.note = e.target.value;
      saveState();
      renderSummary();
    };

    row.onclick = e=>{
      if(e.target === cb) return;
      step.open = !step.open;
      body.style.display = step.open ? "block" : "none";
      saveState();
    };

    stepsList.appendChild(li);
  });
}

function renderSummary(){
  const completed = state.steps.filter(s=>s.done);
  summary.value = completed.map(s=>
    `• ${s.text}${s.note? " — "+s.note:""}`
  ).join("\n");
}

/* ================= EVENTS ================= */

document.getElementById("mark_all").onclick=()=>{
  state.steps.forEach(s=>s.done=true);
  saveState(); renderSteps(); renderSummary();
};
document.getElementById("clear_all").onclick=()=>{
  state.steps.forEach(s=>{
    s.done=false; s.note="";
  });
  saveState(); renderSteps(); renderSummary();
};
document.getElementById("copy_summary").onclick=()=>{
  navigator.clipboard.writeText(summary.value);
  alert("Copied to clipboard");
};

/* ================= INIT ================= */

loadState();
renderSteps();
renderSummary();
</script>
</body>
</html>
